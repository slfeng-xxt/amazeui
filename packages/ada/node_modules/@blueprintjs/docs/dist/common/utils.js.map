{"version":3,"sources":["../src/common/utils.ts"],"names":[],"mappings":"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","file":"common/utils.js","sourcesContent":["/*\n * Copyright 2017-present Palantir Technologies, Inc. All rights reserved.\n * Licensed under the BSD-3 License as modified (the “License”); you may obtain a copy\n * of the license at https://github.com/palantir/blueprint/blob/master/LICENSE\n * and https://github.com/palantir/blueprint/blob/master/PATENTS\n */\n\nimport { Utils } from \"@blueprintjs/core\";\nimport { IHeadingNode, IPageNode, isPageNode } from \"documentalist/dist/client\";\nimport * as React from \"react\";\n\n/**\n * Removes leading indents from a template string without removing all leading whitespace.\n * Trims resulting string to remove blank first/last lines caused by ` location.\n */\nexport function dedent(strings: TemplateStringsArray, ...values: Array<{ toString(): string }> ) {\n    let fullString = strings.reduce((accumulator, str, i) => {\n        return accumulator + values[i - 1].toString() + str;\n    });\n\n    // match all leading spaces/tabs at the start of each line\n    const match = fullString.match(/^[ \\t]*(?=\\S)/gm)!;\n    // find the smallest indent, we don't want to remove all leading whitespace\n    const indent = Math.min(...match.map((el) => el.length));\n    const regexp = new RegExp(\"^[ \\\\t]{\" + indent + \"}\", \"gm\");\n    fullString = indent > 0 ? fullString.replace(regexp, \"\") : fullString;\n    return fullString.trim();\n}\n\nexport function smartSearch(query: string, ...content: string[]) {\n    const terms = query.toLowerCase().split(\" \");\n    const dataToSearch = content.map((s) => s.toLowerCase());\n    return terms.every((term) => dataToSearch.some((d) => d.indexOf(term) >= 0));\n}\n\nexport interface IKeyEventMap {\n    /** event handler invoked on all events */\n    all?: React.KeyboardEventHandler<HTMLElement>;\n\n    /** map keycodes to specific event handlers */\n    [keyCode: number]: React.KeyboardEventHandler<HTMLElement>;\n}\n\nexport function createKeyEventHandler(actions: IKeyEventMap, preventDefault = false) {\n    return (e: React.KeyboardEvent<HTMLElement>) => {\n        for (const k of Object.keys(actions)) {\n            const key = Number(k);\n            if (e.which === key) {\n                if (preventDefault) {\n                    e.preventDefault();\n                }\n                actions[key](e);\n            }\n        }\n        Utils.safeInvoke(actions.all, e);\n    };\n}\n\n/**\n * Performs an in-order traversal of the layout tree, invoking the callback for each node.\n * Callback receives an array of ancestors with direct parent first in the list.\n */\nexport function eachLayoutNode(\n    layout: Array<IHeadingNode | IPageNode>,\n    callback: (node: IHeadingNode | IPageNode, parents: IPageNode[]) => void,\n    parents: IPageNode[] = [],\n) {\n    layout.forEach((node) => {\n        callback(node, parents);\n        if (isPageNode(node)) {\n            eachLayoutNode(node.children, callback, [node, ...parents]);\n        }\n    });\n}\n"]}
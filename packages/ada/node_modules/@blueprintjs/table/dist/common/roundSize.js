/**
 * Copyright 2016 Palantir Technologies, Inc. All rights reserved.
 * Licensed under the BSD-3 License as modified (the “License”); you may obtain a copy
 * of the license at https://github.com/palantir/blueprint/blob/master/LICENSE
 * and https://github.com/palantir/blueprint/blob/master/PATENTS
 */
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var Classes = require("./classes");
/**
 * A React component that measures and rounds the size of its only child. This
 * is necessary due to a Chrome bug that prevents scrolling when the size is
 * changed to a fractional value. See this JSFiddle for a repro of the issue:
 * https://jsfiddle.net/2rmz7p1d/5/
 */
var RoundSize = (function (_super) {
    tslib_1.__extends(RoundSize, _super);
    function RoundSize() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.setInternalRef = function (ref) { return _this.internalElement = ref; };
        _this.setContainerRef = function (ref) { return _this.containerElement = ref; };
        return _this;
    }
    RoundSize.prototype.render = function () {
        return (React.createElement("div", { className: Classes.TABLE_ROUNDED_LAYOUT, ref: this.setContainerRef },
            React.createElement("div", { className: Classes.TABLE_NO_LAYOUT, ref: this.setInternalRef }, React.Children.only(this.props.children))));
    };
    RoundSize.prototype.componentDidMount = function () {
        this.copyRoundedSize();
    };
    RoundSize.prototype.componentDidUpdate = function () {
        this.copyRoundedSize();
    };
    RoundSize.prototype.copyRoundedSize = function () {
        if (this.internalElement == null || this.containerElement == null) {
            return;
        }
        // measure the size of the internal children
        var width = Math.round(this.internalElement.clientWidth) + "px";
        var height = Math.round(this.internalElement.clientHeight) + "px";
        // set the size of the container element with rounded values
        this.containerElement.style.width = width;
        this.containerElement.style.height = height;
    };
    return RoundSize;
}(React.Component));
exports.RoundSize = RoundSize;

//# sourceMappingURL=roundSize.js.map
